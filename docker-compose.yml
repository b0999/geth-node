version: '2'
services:
  alive-checker:
    restart: always
    build: alive-checker
    ports:
      - 3000:3000
    links:
      - geth:node
    depends_on:
      - geth
  geth:
    image: "ethereum/client-go"
    command: geth --testnet --fast --bootnodes "enode://b99d2115e4608446f776fe24f8a624453159774492df691987ee562065b31f94f1b0306c66ba2ec7af0f11eb34af8ce1b9643c5b0ef8376924ae1a93b6c31c5c@172.31.38.10:30303,enode://20c9ad97c081d63397d7b685a412227a40e23c8bdc6688c6f37e97cfbc22d2b4d1db1510d8f61e6a8866ad7f0e17c02b14182d37ea7c3c8b9c2683aeb6b733a1@52.169.14.227:30303,enode://6ce05930c72abc632c58e2e4324f7c7ea478cec0ed4fa2528982cf34483094e9cbc9216e7aa349691242576d552a2a56aaeae426c5303ded677ce455ba1acd9d@13.84.180.240:30303" --port 30303 --rpc --rpcport 8544 --rpcaddr 127.0.0.1 --rpccorsdomain "*" --rpcapi "eth,web3,net" 
    ports:
      - 8544:8544
      - 30303:30303
  nginx:
    image: "nginx"
    links:
      - geth:node
      - alive-checker:checker
    ports:
      - 8545:8545
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf